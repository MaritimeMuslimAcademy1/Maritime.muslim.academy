<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard</title>

<style>
body {
  margin:0;
  font-family:Arial,sans-serif;
  background-color:#000;
  color:#fff;
  height:100vh;
  display:flex;
  flex-direction:column;
  overflow:hidden;
}

.top-bar {
  display:flex;
  justify-content:space-between;
  align-items:center;
  background-color:rgba(10,15,30,0.9);
  padding:10px 20px;
  font-size:14px;
}

.top-bar .left {
  display:flex;
  align-items:center;
}

.home-icon {
  width:20px;
  height:20px;
  fill:white;
}

.top-bar .center {
  font-weight:bold;
  font-size:18px;
}

.top-bar .right {
  display:flex;
  align-items:center;
  gap:10px;
  position:relative;
}

.top-bar .avatar img {
  width:32px;
  height:32px;
  border-radius:50%;
  cursor:pointer;
}

.dashboard-grid {
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:20px;
  max-width:1000px;
  margin:150px auto 80px;
}

.btn {
  background:#0d1b2a;
  border:1px solid #007bff44;
  border-radius:12px;
  padding:40px;
  text-align:center;
  font-weight:bold;
  font-size:20px;
  cursor:pointer;
  text-decoration:none;
  color:#fff;
}

.bottom-bar {
  position:fixed;
  bottom:0;
  width:100%;
  background-color:rgba(10,15,30,0.9);
  display:flex;
  gap:10px;
  padding:10px 20px;
  font-size:14px;
}

.pill {
  background-color:grey;
  border-radius:20px;
  padding:2px 10px;
  font-weight:bold;
}

#accountDropdown {
  display:none;
  position:absolute;
  top:40px;
  right:0;
  background:#0d1b2a;
  border:1px solid #007bff44;
  border-radius:8px;
  min-width:150px;
  z-index:10;
}

.dropdown-item {
  padding:8px 12px;
  cursor:pointer;
}

.dropdown-item:hover {
  background:#007bff22;
}
</style>
</head>

<body>

<div class="top-bar">
  <div class="left">
    <svg class="home-icon" viewBox="0 0 24 24">
      <path d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1z"/>
    </svg>
  </div>

  <div class="center">Maritime Muslim Academy</div>

  <div class="right">
    <span id="userDisplay"></span>
    <div class="avatar" id="avatar">
      <img src="" alt="Avatar">
    </div>

    <div id="accountDropdown">
      <div class="dropdown-item" onclick="logout()">Logout</div>
    </div>
  </div>
</div>

<div class="dashboard-grid">
  <a href="leaderboard.html" class="btn">Leaderboard</a>
  <a href="announcement.html" class="btn">Announcement</a>
  <a href="event-calendar.html" class="btn">Event & Calendar</a>
  <a href="student-role.html" class="btn">Student Role</a>
  <a href="student-voice.html" class="btn">Student Voice</a>
  <a href="smart-box.html" class="btn">Smart Box</a>
</div>

<div class="bottom-bar">
  <div class="pill">MMA</div>
  <div>Working on it</div>
</div>

<script>
const DEFAULT_AVATAR =
"https://scontent-lga3-3.xx.fbcdn.net/v/t39.30808-6/597164807_1335245238401700_1090041719849665448_n.jpg";

let displayName = localStorage.getItem("dashboardDisplayName");
let avatar = localStorage.getItem("avatar");

if(!displayName){
  displayName = "Guest";
}

if(!avatar){
  avatar = DEFAULT_AVATAR;
}

document.getElementById("userDisplay").textContent = displayName;
document.querySelector(".avatar img").src = avatar;

const avatarEl = document.getElementById("avatar");
const accountDropdown = document.getElementById("accountDropdown");

avatarEl.onclick = () => {
  accountDropdown.style.display =
    accountDropdown.style.display === "block" ? "none" : "block";
};

document.onclick = e => {
  if (!avatarEl.contains(e.target) && !accountDropdown.contains(e.target)) {
    accountDropdown.style.display = "none";
  }
};

function logout(){
  localStorage.removeItem("username");
  localStorage.removeItem("dashboardUsername");
  localStorage.removeItem("dashboardDisplayName");
  localStorage.removeItem("role");
  localStorage.removeItem("avatar");
  window.location.href = "login.html";
}
</script>

</body>
</html>
