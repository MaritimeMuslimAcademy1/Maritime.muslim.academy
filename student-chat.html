<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LB iPhone Simulator</title>
<style>
body {
  margin:0;
  font-family:Arial,sans-serif;
  background:#111;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.phone-frame {
  width:390px;
  height:844px;
  border:16px solid #000;
  border-radius:50px;
  background:#000;
  overflow:hidden;
  position:relative;
  box-shadow:0 0 40px rgba(0,0,0,0.7);
}
.screen {
  width:100%;
  height:100%;
  position:relative;
  background-size:cover;
  background-position:center;
}
.overlay {
  position:absolute;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.95);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  color:#fff;
  text-align:center;
  font-size:20px;
  transition:0.3s;
}
button {
  margin-top:20px;
  padding:10px 20px;
  border:none;
  border-radius:12px;
  background:#007bff;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}
.home-screen {
  display:none;
  flex-wrap:wrap;
  padding:40px 20px;
  gap:20px;
}
.app {
  width:60px;
  height:60px;
  background:#222;
  border-radius:12px;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#fff;
  font-size:12px;
  text-align:center;
  cursor:pointer;
  user-select:none;
}
.app.dragging { opacity:0.5; }
.phone-screen {
  position:absolute;
  top:0; left:0;
  width:100%; height:100%;
  background:#0d1b2a;
  display:none;
  flex-direction:column;
}
.header {
  padding:10px;
  background:rgba(10,15,30,0.9);
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-weight:bold;
}
.chat-messages {
  flex:1;
  padding:10px;
  overflow-y:auto;
  display:flex;
  flex-direction:column;
  gap:8px;
}
.chat-input-area {
  display:flex;
  gap:5px;
  padding:8px;
  border-top:1px solid #007bff44;
  background:#0d1b2a;
}
.chat-input-area input {
  flex:1;
  padding:8px 10px;
  border-radius:20px;
  border:1px solid #007bff44;
  background:#000;
  color:#fff;
}
.chat-input-area button {
  padding:8px 12px;
  border-radius:12px;
  border:1px solid #007bff44;
  background:#007bff22;
  color:#fff;
  cursor:pointer;
}
.keypad {
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin-top:20px;
}
.keypad button {
  font-size:24px;
  width:60px;
  height:60px;
  border-radius:50%;
  background:#222;
  color:#fff;
  border:none;
  cursor:pointer;
}
</style>
</head>
<body>

<div class="phone-frame">
  <div class="screen" id="screen">
    <!-- Welcome -->
    <div class="overlay" id="welcomeScreen">
      <div>Welcome</div>
      <div>Select Language</div>
      <button onclick="nextStep('faceID')">Next</button>
    </div>
    <!-- Face ID -->
    <div class="overlay" id="faceID" style="display:none;">
      <div>Face ID Setup</div>
      <div id="faceScan" style="margin-top:20px;">ðŸ”µ</div>
      <button onclick="nextStep('passcode')">Next</button>
    </div>
    <!-- Passcode -->
    <div class="overlay" id="passcode" style="display:none;">
      <div>Enter Passcode</div>
      <input type="password" id="passInput" placeholder="â—â—â—â—" readonly style="text-align:center;font-size:24px;letter-spacing:10px;">
      <div class="keypad">
        <button onclick="addDigit(1)">1</button>
        <button onclick="addDigit(2)">2</button>
        <button onclick="addDigit(3)">3</button>
        <button onclick="addDigit(4)">4</button>
        <button onclick="addDigit(5)">5</button>
        <button onclick="addDigit(6)">6</button>
        <button onclick="addDigit(7)">7</button>
        <button onclick="addDigit(8)">8</button>
        <button onclick="addDigit(9)">9</button>
        <button onclick="clearDigit()">C</button>
        <button onclick="addDigit(0)">0</button>
        <button onclick="confirmPasscode()">âœ”</button>
      </div>
    </div>
    <!-- Mode -->
    <div class="overlay" id="mode" style="display:none;">
      <div>Choose Mode</div>
      <button onclick="setMode('light')">Light Mode</button>
      <button onclick="setMode('dark')">Dark Mode</button>
    </div>
    <!-- Home -->
    <div class="overlay home-screen" id="homeScreen">
      <div class="app" draggable="true" onclick="openApp('chat')">Student Chat</div>
      <div class="app" draggable="true">Messages</div>
      <div class="app" draggable="true">Camera</div>
      <div class="app" draggable="true">Settings</div>
    </div>
  </div>
</div>

<!-- Student Chat App -->
<div id="chatApp" class="phone-screen">
  <div class="header">Student Chat <button onclick="closeApp('chatApp')">Back</button></div>
  <div class="chat-messages" id="chatScreen"></div>
  <div class="chat-input-area">
    <input type="text" id="chatInput" placeholder="Type a message...">
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
// USER
let username = localStorage.getItem("dashboardUsername") || "Rayan Khalid";
let avatar = localStorage.getItem("dashboardAvatar") || "https://i.imgur.com/oCkEbrA.jpg";

// SETUP FLOW
function nextStep(step){
  document.querySelectorAll('.overlay').forEach(o=>o.style.display='none');
  document.getElementById(step).style.display='flex';
}
function setMode(mode){
  document.body.style.background = mode==='light' ? '#eee' : '#111';
  nextStep('home');
}

// PASSCODE
let passcode = '';
function addDigit(d){
  const input=document.getElementById('passInput');
  if(passcode.length<4){ passcode+=d; input.value='â—'.repeat(passcode.length); }
}
function clearDigit(){ passcode=''; document.getElementById('passInput').value=''; }
function confirmPasscode(){ if(passcode.length===4) nextStep('mode'); }

// HOME SCREEN
function openApp(app){
  document.getElementById('screen').style.display='none';
  document.getElementById(app+'App').style.display='flex';
  if(app==='chat') loadChat();
}
function closeApp(app){ document.getElementById(app+'App').style.display='none'; document.getElementById('screen').style.display='block'; }

// STUDENT CHAT
let messages = JSON.parse(localStorage.getItem("chatMessages")) || [];
const chatScreen = document.getElementById('chatScreen');
function loadChat(){
  chatScreen.innerHTML='';
  messages.forEach(m=>chatScreen.appendChild(createMessage(m.username,m.text,m.me,m.avatar)));
  chatScreen.scrollTop=chatScreen.scrollHeight;
}
function sendMessage(){
  const chatInput=document.getElementById('chatInput'); 
  const text=chatInput.value.trim(); 
  if(!text) return;
  const msg={username,text,me:true,avatar};
  messages.push(msg);
  localStorage.setItem("chatMessages",JSON.stringify(messages));
  chatScreen.appendChild(createMessage(msg.username,msg.text,msg.me,msg.avatar));
  chatScreen.scrollTop=chatScreen.scrollHeight;
  chatInput.value='';
}
function createMessage(user,text,me=false,avatarSrc=avatar){
  const div=document.createElement('div'); 
  div.className='message '+(me?'me':'other'); 
  div.innerHTML=`
    <div class="avatar" style="background-image:url('${avatarSrc}')"></div>
    <div class="message-content">
      <div class="username">${user}</div>
      <div class="text">${text}</div>
    </div>
    <button class="delete-btn">x</button>`;
  div.querySelector('.delete-btn').onclick=(e)=>{ e.stopPropagation(); div.remove(); messages=messages.filter(m=>m.text!==text||m.username!==user); localStorage.setItem("chatMessages",JSON.stringify(messages)); };
  div.ondblclick=()=>div.classList.toggle('liked'); 
  return div;
}
</script>
</body>
</html>
